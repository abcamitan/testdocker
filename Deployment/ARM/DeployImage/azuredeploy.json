{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
      "location": {
          "type": "string"
      },
      "containerName": {
          "type": "string",
          "defaultValue": "acrlinuxctnrgrp"
      },
      "imageType": {
          "type": "string",
          "allowedValues": [
              "Public",
              "Private"
          ],
          "defaultValue": "Private"
      },
      "imageName": {
          "type": "string"
      },
      "osType": {
          "type": "string",
          "allowedValues": [
              "Linux",
              "Windows"
          ],
          "defaultValue": "Linux"
      },
      "numberCpuCores": {
          "type": "string",
          "defaultValue": "1"
      },
      "memory": {
          "type": "string",
          "defaultValue": "1.5"
      },
      "restartPolicy": {
          "type": "string",
          "allowedValues": [
              "OnFailure",
              "Always",
              "Never"
          ],
          "defaultValue": "OnFailure"
      },
      "imageRegistryLoginServer": {
          "type": "string"
      },
      "imageUsername": {
          "type": "string"
      },
      "imagePassword": {
          "type": "secureString"
      },
      "ipAddressType": {
          "type": "string",
          "defaultValue": "Public"
      },
      "port": {
          "type": "int",
          "defaultValue": 80
      }
  },
  "resources": [
      {
          "location": "[parameters('location')]",
          "name": "[parameters('containerName')]",
          "type": "Microsoft.ContainerInstance/containerGroups",
          "apiVersion": "2019-12-01",
          "properties": {
              "containers": [
                  {
                      "name": "[parameters('containerName')]",
                      "properties": {
                          "image": "[parameters('imageName')]",
                          "resources": {
                              "requests": {
                                  "cpu": "[int(parameters('numberCpuCores'))]",
                                  "memoryInGB": "[float(parameters('memory'))]"
                              }
                          },
                          "ports": [
                            {
                              "port": "[parameters('port')]",
                              "protocol": "TCP"
                            }
                          ]
                      }
                  }
              ],
              "restartPolicy": "[parameters('restartPolicy')]",
              "osType": "[parameters('osType')]",
              "imageRegistryCredentials": [
                  {
                      "server": "[parameters('imageRegistryLoginServer')]",
                      "username": "[parameters('imageUsername')]",
                      "password": "[parameters('imagePassword')]"
                  }
              ],
              "ipAddress": {
                  "type": "[parameters('ipAddressType')]",
                  "ports": [
                    {
                      "port": "[parameters('port')]",
                      "protocol": "TCP"
                    }
                  ]
              }
          },
          "tags": {}
      }
  ]
}